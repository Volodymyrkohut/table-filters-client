"use strict";var Ue=Object.create;var O=Object.defineProperty;var xe=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var he=Object.getPrototypeOf,Oe=Object.prototype.hasOwnProperty;var Te=(e,t)=>{for(var o in t)O(e,o,{get:t[o],enumerable:!0})},D=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Qe(t))!Oe.call(e,r)&&r!==o&&O(e,r,{get:()=>t[r],enumerable:!(i=xe(t,r))||i.enumerable});return e};var s=(e,t,o)=>(o=e!=null?Ue(he(e)):{},D(t||!e||!e.__esModule?O(o,"default",{value:e,enumerable:!0}):o,e)),Ve=e=>D(O({},"__esModule",{value:!0}),e);var We={};Te(We,{TableFiltersClient:()=>Y});module.exports=Ve(We);var c=s(require("react"));var g=require("formik");var a=s(require("yup")),L=e=>e?.map(t=>t.value),b={required:"Required",date:"Should be valid date format",string:"Should be valid string",number:"Should be valid number"},Be=a.object().shape({filters:a.array().of(a.object().shape({id:a.object().shape({label:a.string().required(),value:a.string().required(),type:a.string().required()}).nullable().required(b.required),values:a.array().when("id",{is:e=>e.type==="number",then:a.array().transform(e=>L(e)).of(a.number().typeError(b.number)).required(b.required)}).when("id",{is:e=>e.type==="date",then:a.array().transform(e=>L(e)).of(a.date().typeError(b.date)).required(b.required)}).when("id",{is:e=>e.type!=="date"&&e.type!=="number",then:a.array().transform(e=>L(e)).of(a.number().typeError(b.string)).required(b.required)}),operator:a.string().nullable().required(b.required)}))}),Z=Be;var f=s(require("react"));var _=s(require("react"));var j="number",M="string",W="boolean",G="date",E="enum",H="source";var V=s(require("react")),K=require("formik");var v=s(require("react"));var k=s(require("classnames"));var T=s(require("react")),Ie=()=>T.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T.createElement("rect",{width:"16",height:"16",fill:"white",fillOpacity:"0.01"}),T.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5109 2.65516C8.67288 2.72228 8.82004 2.82065 8.94399 2.94466L13.056 7.05599C13.1801 7.17995 13.2786 7.32716 13.3457 7.48919C13.4129 7.65123 13.4475 7.82492 13.4475 8.00033C13.4475 8.17574 13.4129 8.34943 13.3457 8.51146C13.2786 8.6735 13.1801 8.8207 13.056 8.94466L8.94399 13.056C8.82004 13.18 8.67288 13.2784 8.5109 13.3455C8.34893 13.4126 8.17532 13.4472 7.99999 13.4472C7.82466 13.4472 7.65104 13.4126 7.48907 13.3455C7.3271 13.2784 7.17993 13.18 7.05599 13.056L2.94399 8.94466C2.81988 8.8207 2.72142 8.6735 2.65424 8.51146C2.58707 8.34943 2.55249 8.17574 2.55249 8.00033C2.55249 7.82492 2.58707 7.65123 2.65424 7.48919C2.72142 7.32716 2.81988 7.17995 2.94399 7.05599L7.05599 2.94466C7.17993 2.82065 7.3271 2.72228 7.48907 2.65516C7.65104 2.58804 7.82466 2.5535 7.99999 2.5535C8.17532 2.5535 8.34893 2.58804 8.5109 2.65516ZM7.52858 9.13806C7.6536 9.26308 7.82317 9.33332 7.99998 9.33332C8.1768 9.33332 8.34636 9.26308 8.47139 9.13806C8.59641 9.01304 8.66665 8.84347 8.66665 8.66666V5.33332C8.66665 5.15651 8.59641 4.98694 8.47139 4.86192C8.34636 4.73689 8.1768 4.66666 7.99998 4.66666C7.82317 4.66666 7.6536 4.73689 7.52858 4.86192C7.40356 4.98694 7.33332 5.15651 7.33332 5.33332V8.66666C7.33332 8.84347 7.40356 9.01304 7.52858 9.13806ZM7.52858 11.1381C7.6536 11.2631 7.82317 11.3333 7.99998 11.3333C8.1768 11.3333 8.34636 11.2631 8.47139 11.1381C8.59641 11.013 8.66665 10.8435 8.66665 10.6667C8.66665 10.4898 8.59641 10.3203 8.47139 10.1953C8.34636 10.0702 8.1768 9.99999 7.99998 9.99999C7.82317 9.99999 7.6536 10.0702 7.52858 10.1953C7.40356 10.3203 7.33332 10.4898 7.33332 10.6667C7.33332 10.8435 7.40356 11.013 7.52858 11.1381Z",fill:"#DE350B"})),J=Ie;var Se=e=>{let{children:t,label:o="",isError:i,error:r}=e,l=(0,k.default)("field-control",{isError:i});return v.createElement("div",{className:l},o&&v.createElement("label",null,o),v.createElement("div",{className:"field-control__field"},t),v.createElement("span",{className:"field-control__error"},i&&v.createElement("span",null,v.createElement(J,null),r)))},R=Se;var X=s(require("react")),q=require("react-select-async-paginate"),Ne=e=>{let{...t}=e;return X.createElement(q.AsyncPaginate,{additional:{page:1},...t})},$=Ne;var Le=e=>{let{name:t,label:o,onChange:i,...r}=e;return V.createElement(K.Field,{name:t},l=>{let{field:m,meta:n,form:p}=l,d=n.touched&&!!n.error;return V.createElement(R,{isError:d,error:n.error,label:o},V.createElement($,{...r,...m,onBlur:()=>p.setFieldTouched(t,!0),onChange:u=>{i&&i(u),p.setFieldValue(t,u)}}))})},ee=Le;var B=s(require("react")),ie=require("formik");var te=s(require("react")),re=s(require("react-select/async-creatable")),Ee=function(e){let{options:t,isError:o,...i}=e;return te.createElement(re.default,{defaultOptions:t,...i})},oe=Ee;var we=e=>{let{name:t,label:o,onChange:i,...r}=e;return B.createElement(ie.Field,{name:t},l=>{let{field:m,meta:n,form:p}=l,d=n.touched&&!!n.error;return B.createElement(R,{isError:d,error:n.error,label:o},B.createElement(oe,{...r,...m,onBlur:()=>p.setFieldTouched(t,!0),onChange:u=>{i&&i(u),p.setFieldValue(t,u)}}))})},y=we;var Pe=({type:e,name:t,valueOptions:o,loadOptions:i,classNamePrefix:r})=>{switch(e){case H:return _.createElement(ee,{name:t,isMulti:!0,loadOptions:i,classNamePrefix:r});case(M||W||G||E||j):return _.createElement(y,{name:t,isMulti:!0,classNamePrefix:r});case E:return _.createElement(y,{name:t,options:o,isMulti:!0,classNamePrefix:r});default:return _.createElement(y,{name:t,isMulti:!0,classNamePrefix:r})}},le=Pe;var U=s(require("react")),pe=require("formik");var I=s(require("react")),se=s(require("classnames"));var w=s(require("react")),Ae=()=>w.createElement("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:"css-tj5bde-Svg"},w.createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})),ae=Ae;var ze=e=>{let{isError:t,children:o,className:i,...r}=e,l=(0,se.default)("field-select",i,{isError:t});return I.default.createElement("div",{className:l},I.default.createElement("select",{autoComplete:"off",...r},o),I.default.createElement(ae,null))},ne=ze;var Ye=e=>{let{name:t,options:o=[],disabled:i,label:r,id:l,className:m}=e;return U.createElement(pe.Field,{name:t},n=>{let{field:p,meta:d}=n,u=d.touched&&!!d.error;return U.createElement(R,{isError:u,error:d.error,label:r},U.createElement(ne,{id:l,...p,isError:u,disabled:i,className:m},o.map(C=>U.createElement("option",{key:C.value,value:C.value},C.key))))})},ce=Ye;var A=s(require("react")),z=s(require("classnames"));var P=s(require("react")),De=()=>P.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P.createElement("path",{d:"M18.222 7.111H15.111V5.556C15.111 5.1435 14.9472 4.74787 14.6556 4.4561C14.364 4.16432 13.9685 4.00027 13.556 4H10.444C10.0315 4.00027 9.63598 4.16432 9.34439 4.4561C9.0528 4.74787 8.889 5.1435 8.889 5.556V7.111H5.778C5.57166 7.111 5.37377 7.19297 5.22787 7.33887C5.08197 7.48477 5 7.68266 5 7.889C5 8.09534 5.08197 8.29323 5.22787 8.43913C5.37377 8.58503 5.57166 8.667 5.778 8.667H6.486L7.461 19.457C7.4827 19.6964 7.59309 19.9191 7.77051 20.0814C7.94793 20.2436 8.17958 20.3337 8.42 20.334H15.507C15.7677 20.3341 16.0189 20.2366 16.2114 20.0608C16.4038 19.885 16.5235 19.6436 16.547 19.384L17.515 8.668H18.223C18.3252 8.66787 18.4263 8.64761 18.5207 8.6084C18.615 8.56918 18.7007 8.51176 18.7728 8.43942C18.845 8.36709 18.9022 8.28125 18.9412 8.1868C18.9801 8.09236 19.0001 7.99117 19 7.889C19 7.68266 18.918 7.48477 18.7721 7.33887C18.6262 7.19297 18.4283 7.111 18.222 7.111ZM10.444 5.556H13.555V7.111H10.444V5.556ZM15.044 18.778H8.96L8.047 8.667H15.952L15.044 18.778Z",fill:"#94A0B5"})),de=De;var Ze=({className:e="",...t})=>{let o=(0,z.default)("remove-button",z.default);return A.createElement("button",{...t,className:o},A.createElement(de,null))},me=Ze;var je=e=>{let{idOptions:t,loadOptions:o,operatorOptions:i,filterType:r,valueOptions:l,onRemove:m,onChangeIdSelect:n,index:p}=e;return f.createElement("div",{className:"filter-row"},f.createElement("div",{className:"filter-row__field filter-row__field__id"},f.createElement(y,{classNamePrefix:"select-id",name:`filters[${p}].id`,options:t,onChange:n})),f.createElement("div",{className:"filter-row__field filter-row__field__operator"},f.createElement(ce,{className:"select-operator",name:`filters[${p}].operator`,options:i})),f.createElement("div",{className:"filter-row__field filter-row__field__values"},f.createElement(le,{classNamePrefix:"select-values",name:`filters[${p}].values`,type:r,valueOptions:l,loadOptions:o})),f.createElement("div",{className:"filter-row__field filter-row__remove"},f.createElement(me,{onClick:()=>m(p)})))},ue=je;var fe=(e,t)=>({filters:e.filters?.length?e.filters.map(i=>{let r=t.find(l=>i.id.value===l.value);return{values:i.values,operator:i.operator,id:r}}):[]}),Fe=e=>e.map(t=>{let{caption:o,id:i,values:r,operators:l,...m}=t,n;Array.isArray(r)?n=r.map(d=>({label:d.name,value:String(d.id)})):n=r;let p=l.map(d=>({key:d,value:d}));return{label:o,value:String(i),values:n,operators:[{key:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043E\u043F\u0435\u0440\u0430\u0442\u043E\u0440",value:""},...p],...m}}),be=e=>({filters:e.filters.map(i=>{let{id:r,...l}=i;return{...l,id:{label:r.label,value:r.value}}})});var Me=e=>{let{onSubmitFilterForm:t,initialFilters:o,filtersTypesList:i,onRemoveFilter:r,onAddFilter:l,onLoadSourceOptions:m,addFilterButtonText:n,submitFilterButtonText:p,idLabelText:d,operatorLabelText:u,valuesLabelText:C}=e,S=Fe(i),ve=fe(o,S);return c.createElement(g.Formik,{onSubmit:(x,Q)=>{let N=be(x);t&&t(N)},initialValues:ve,validationSchema:Z,enableReinitialize:!0},c.createElement(g.Form,null,c.createElement(g.FieldArray,{name:"filters"},x=>{let{form:Q,push:N,remove:Re}=x,{filters:ye}=Q.values,ge=F=>{Re(F),r&&r(F)},Ce=()=>{let[F=null]=S;N({id:F,operator:"",values:[]}),l&&l(x)};return c.createElement("div",{className:"filter-list"},c.createElement("div",{className:"filter-list-labels"},c.createElement("label",null,d),c.createElement("label",null,u),c.createElement("label",null,C)),c.createElement("ul",{className:"filter-list__items"},ye.map((F,h)=>{let _e=()=>{Q.setFieldValue(`filters[${h}].operator`,""),Q.setFieldValue(`filters[${h}].values`,null)};return c.createElement("li",{className:"filter-list__item",key:h},c.createElement(ue,{loadOptions:m(F?.id?.value),filterType:F?.id?.type,onChangeIdSelect:_e,idOptions:S,operatorOptions:F?.id?.operators,valueOptions:F?.id?.values,onRemove:ge,index:h}))})),c.createElement("div",{className:"filter-list__button"},c.createElement("button",{type:"button",onClick:Ce},n)))}),c.createElement("div",{className:"filter-list-submit"},c.createElement("button",{type:"submit"},p))))},Y=Me;
//# sourceMappingURL=index.js.map
