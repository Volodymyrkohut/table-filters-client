"use strict";var he=Object.create;var P=Object.defineProperty;var Ie=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var xe=Object.getPrototypeOf,Pe=Object.prototype.hasOwnProperty;var Oe=(e,t)=>{for(var o in t)P(e,o,{get:t[o],enumerable:!0})},q=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Se(t))!Pe.call(e,r)&&r!==o&&P(e,r,{get:()=>t[r],enumerable:!(a=Ie(t,r))||a.enumerable});return e};var s=(e,t,o)=>(o=e!=null?he(xe(e)):{},q(t||!e||!e.__esModule?P(o,"default",{value:e,enumerable:!0}):o,e)),Ae=e=>q(P({},"__esModule",{value:!0}),e);var $e={};Oe($e,{TableFiltersClient:()=>H});module.exports=Ae($e);var m=s(require("react"));var R=require("formik");var l=s(require("yup")),w=e=>e?.map(t=>t.value),F={required:"Required",date:"Should be valid date format",string:"Should be valid string",number:"Should be valid number"},Le=l.object().shape({filters:l.array().of(l.object().shape({id:l.object().shape({label:l.string().required(),value:l.string().required(),type:l.string().required()}).nullable().required(F.required),values:l.array().when("id",{is:e=>e.type==="number",then:l.array().transform(e=>w(e)).of(l.number().typeError(F.number)).required(F.required)}).when("id",{is:e=>e.type==="date",then:l.array().transform(e=>w(e)).of(l.date().typeError(F.date)).required(F.required)}).when("id",{is:e=>e.type!=="date"&&e.type!=="number",then:l.array().transform(e=>w(e)).of(l.number().typeError(F.string)).required(F.required)}),operator:l.string().nullable().required(F.required)}))}),U=Le;var f=s(require("react"));var g=s(require("react"));var k="number",Z="string",$="boolean",j="date",Y="enum",z="source";var A=s(require("react")),X=require("formik");var y=s(require("react"));var G=s(require("classnames"));var O=s(require("react")),Ee=()=>O.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},O.createElement("rect",{width:"16",height:"16",fill:"white",fillOpacity:"0.01"}),O.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5109 2.65516C8.67288 2.72228 8.82004 2.82065 8.94399 2.94466L13.056 7.05599C13.1801 7.17995 13.2786 7.32716 13.3457 7.48919C13.4129 7.65123 13.4475 7.82492 13.4475 8.00033C13.4475 8.17574 13.4129 8.34943 13.3457 8.51146C13.2786 8.6735 13.1801 8.8207 13.056 8.94466L8.94399 13.056C8.82004 13.18 8.67288 13.2784 8.5109 13.3455C8.34893 13.4126 8.17532 13.4472 7.99999 13.4472C7.82466 13.4472 7.65104 13.4126 7.48907 13.3455C7.3271 13.2784 7.17993 13.18 7.05599 13.056L2.94399 8.94466C2.81988 8.8207 2.72142 8.6735 2.65424 8.51146C2.58707 8.34943 2.55249 8.17574 2.55249 8.00033C2.55249 7.82492 2.58707 7.65123 2.65424 7.48919C2.72142 7.32716 2.81988 7.17995 2.94399 7.05599L7.05599 2.94466C7.17993 2.82065 7.3271 2.72228 7.48907 2.65516C7.65104 2.58804 7.82466 2.5535 7.99999 2.5535C8.17532 2.5535 8.34893 2.58804 8.5109 2.65516ZM7.52858 9.13806C7.6536 9.26308 7.82317 9.33332 7.99998 9.33332C8.1768 9.33332 8.34636 9.26308 8.47139 9.13806C8.59641 9.01304 8.66665 8.84347 8.66665 8.66666V5.33332C8.66665 5.15651 8.59641 4.98694 8.47139 4.86192C8.34636 4.73689 8.1768 4.66666 7.99998 4.66666C7.82317 4.66666 7.6536 4.73689 7.52858 4.86192C7.40356 4.98694 7.33332 5.15651 7.33332 5.33332V8.66666C7.33332 8.84347 7.40356 9.01304 7.52858 9.13806ZM7.52858 11.1381C7.6536 11.2631 7.82317 11.3333 7.99998 11.3333C8.1768 11.3333 8.34636 11.2631 8.47139 11.1381C8.59641 11.013 8.66665 10.8435 8.66665 10.6667C8.66665 10.4898 8.59641 10.3203 8.47139 10.1953C8.34636 10.0702 8.1768 9.99999 7.99998 9.99999C7.82317 9.99999 7.6536 10.0702 7.52858 10.1953C7.40356 10.3203 7.33332 10.4898 7.33332 10.6667C7.33332 10.8435 7.40356 11.013 7.52858 11.1381Z",fill:"#DE350B"})),W=Ee;var _e=e=>{let{children:t,label:o="",isError:a,error:r}=e,i=(0,G.default)("field-control",{isError:a});return y.createElement("div",{className:i},o&&y.createElement("label",null,o),y.createElement("div",{className:"field-control__field"},t),y.createElement("span",{className:"field-control__error"},a&&y.createElement("span",null,y.createElement(W,null),r)))},v=_e;var J=s(require("react")),K=require("react-select-async-paginate"),Ne=e=>{let{...t}=e;return J.createElement(K.AsyncPaginate,{additional:{page:1},...t})},Q=Ne;var we=e=>{let{name:t,label:o,onChange:a,...r}=e;return A.createElement(X.Field,{name:t},i=>{let{field:d,meta:n,form:p}=i,c=n.touched&&!!n.error;return A.createElement(v,{isError:c,error:n.error,label:o},A.createElement(Q,{...r,...d,onBlur:()=>p.setFieldTouched(t,!0),onChange:u=>{a&&a(u),p.setFieldValue(t,u)}}))})},ee=we;var L=s(require("react")),ae=require("formik");var te=s(require("react")),re=s(require("react-select/async-creatable")),Ye=function(e){let{options:t,isError:o,...a}=e;return te.createElement(re.default,{defaultOptions:t,...a})},oe=Ye;var Ve=e=>{let{name:t,label:o,onChange:a,...r}=e;return L.createElement(ae.Field,{name:t},i=>{let{field:d,meta:n,form:p}=i,c=n.touched&&!!n.error;return L.createElement(v,{isError:c,error:n.error,label:o},L.createElement(oe,{...r,...d,onBlur:()=>p.setFieldTouched(t,!0),onChange:u=>{a&&a(u),p.setFieldValue(t,u)}}))})},b=Ve;var Be=({type:e,name:t,valueOptions:o,loadOptions:a,classNamePrefix:r})=>{switch(e){case z:return g.createElement(ee,{name:t,isMulti:!0,loadOptions:a,classNamePrefix:r});case(Z||$||j||Y||k):return g.createElement(b,{name:t,isMulti:!0,classNamePrefix:r});case Y:return g.createElement(b,{name:t,options:o,isMulti:!0,classNamePrefix:r});default:return g.createElement(b,{name:t,isMulti:!0,classNamePrefix:r})}},ie=Be;var h=s(require("react")),pe=require("formik");var E=s(require("react")),se=s(require("classnames"));var V=s(require("react")),Me=()=>V.createElement("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:"css-tj5bde-Svg"},V.createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})),le=Me;var De=e=>{let{isError:t,children:o,className:a,...r}=e,i=(0,se.default)("field-select",a,{isError:t});return E.default.createElement("div",{className:i},E.default.createElement("select",{autoComplete:"off",...r},o),E.default.createElement(le,null))},ne=De;var He=e=>{let{name:t,options:o=[],disabled:a,label:r,id:i,className:d}=e;return h.createElement(pe.Field,{name:t},n=>{let{field:p,meta:c}=n,u=c.touched&&!!c.error;return h.createElement(v,{isError:u,error:c.error,label:r},h.createElement(ne,{id:i,...p,isError:u,disabled:a,className:d},o.map(T=>h.createElement("option",{key:T.value,value:T.value},T.key))))})},me=He;var M=s(require("react")),D=s(require("classnames"));var B=s(require("react")),qe=()=>B.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},B.createElement("path",{d:"M18.222 7.111H15.111V5.556C15.111 5.1435 14.9472 4.74787 14.6556 4.4561C14.364 4.16432 13.9685 4.00027 13.556 4H10.444C10.0315 4.00027 9.63598 4.16432 9.34439 4.4561C9.0528 4.74787 8.889 5.1435 8.889 5.556V7.111H5.778C5.57166 7.111 5.37377 7.19297 5.22787 7.33887C5.08197 7.48477 5 7.68266 5 7.889C5 8.09534 5.08197 8.29323 5.22787 8.43913C5.37377 8.58503 5.57166 8.667 5.778 8.667H6.486L7.461 19.457C7.4827 19.6964 7.59309 19.9191 7.77051 20.0814C7.94793 20.2436 8.17958 20.3337 8.42 20.334H15.507C15.7677 20.3341 16.0189 20.2366 16.2114 20.0608C16.4038 19.885 16.5235 19.6436 16.547 19.384L17.515 8.668H18.223C18.3252 8.66787 18.4263 8.64761 18.5207 8.6084C18.615 8.56918 18.7007 8.51176 18.7728 8.43942C18.845 8.36709 18.9022 8.28125 18.9412 8.1868C18.9801 8.09236 19.0001 7.99117 19 7.889C19 7.68266 18.918 7.48477 18.7721 7.33887C18.6262 7.19297 18.4283 7.111 18.222 7.111ZM10.444 5.556H13.555V7.111H10.444V5.556ZM15.044 18.778H8.96L8.047 8.667H15.952L15.044 18.778Z",fill:"#94A0B5"})),ce=qe;var Ue=({className:e="",...t})=>{let o=(0,D.default)("remove-button",D.default);return M.createElement("button",{...t,className:o},M.createElement(ce,null))},de=Ue;var ke=e=>{let{idOptions:t,loadOptions:o,operatorOptions:a,filterType:r,valueOptions:i,onRemove:d,onChangeIdSelect:n,index:p}=e;return f.createElement("div",{className:"filter-row"},f.createElement("div",{className:"filter-row__field filter-row__field__id"},f.createElement(b,{classNamePrefix:"select-id",name:`filters[${p}].id`,options:t,onChange:n})),f.createElement("div",{className:"filter-row__field filter-row__field__operator"},f.createElement(me,{className:"select-operator",name:`filters[${p}].operator`,options:a})),f.createElement("div",{className:"filter-row__field filter-row__field__values"},f.createElement(ie,{classNamePrefix:"select-values",name:`filters[${p}].values`,type:r,valueOptions:i,loadOptions:o})),f.createElement("div",{className:"filter-row__field filter-row__remove"},f.createElement(de,{onChange:()=>d(p)})))},ue=ke;var fe=(e,t)=>({filters:e.filters?.length?e.filters.map(a=>{let r=t.find(i=>a.id.value===i.value);return{values:a.values,operator:a.operator,id:r}}):[]}),Ce=e=>e.map(t=>{let{caption:o,id:a,values:r,operators:i,...d}=t,n;Array.isArray(r)?n=r.map(c=>({label:c.name,value:String(c.id)})):n=r;let p=i.map(c=>({key:c,value:c}));return{label:o,value:String(a),values:n,operators:[{key:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043E\u043F\u0435\u0440\u0430\u0442\u043E\u0440",value:""},...p],...d}}),Fe=e=>({filters:e.filters.map(a=>{let{id:r,...i}=a;return{...i,id:{label:r.label,value:r.value}}})});var Ze=e=>{let{onSubmitFilterForm:t,initialFilters:o,filtersTypesList:a,onRemoveFilter:r,onAddFilter:i,onLoadSourceOptions:d,addFilterButtonText:n,submitFilterButtonText:p,idLabelText:c,operatorLabelText:u,valuesLabelText:T}=e,_=Ce(a),ye=fe(o,_);return m.createElement(R.Formik,{onSubmit:(I,S)=>{let N=Fe(I);t&&t(N)},initialValues:ye,validationSchema:U,enableReinitialize:!0},m.createElement(R.Form,null,m.createElement(R.FieldArray,{name:"filters"},I=>{let{form:S,push:N,remove:ve}=I,{filters:be}=S.values,Re=C=>{ve(C),r&&r(C)},Te=()=>{let[C=null]=_;N({id:C,operator:"",values:[]}),i&&i(I)};return m.createElement("div",{className:"filter-list"},m.createElement("div",{className:"filter-list-labels"},m.createElement("label",null,c),m.createElement("label",null,u),m.createElement("label",null,T)),m.createElement("ul",{className:"filter-list__items"},be.map((C,x)=>{let ge=()=>{S.setFieldValue(`filters[${x}].operator`,""),S.setFieldValue(`filters[${x}].values`,null)};return m.createElement("li",{className:"filter-list__item",key:x},m.createElement(ue,{loadOptions:d(C?.id?.value),filterType:C?.id?.type,onChangeIdSelect:ge,idOptions:_,operatorOptions:C?.id?.operators,valueOptions:C?.id?.values,onRemove:Re,index:x}))})),m.createElement("div",{className:"filter-list__button"},m.createElement("button",{type:"button",onClick:Te},n)))}),m.createElement("div",{className:"filter-list-submit"},m.createElement("button",{type:"submit"},p))))},H=Ze;
//# sourceMappingURL=index.js.map
